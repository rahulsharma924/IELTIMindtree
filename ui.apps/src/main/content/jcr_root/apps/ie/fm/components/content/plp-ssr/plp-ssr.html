<sly data-sly-use.clientlib="/libs/granite/sightly/templates/clientlib.html"
     data-sly-call="${clientlib.css @ categories='fm.plp'}" />

<sly data-sly-use.clientlib="/libs/granite/sightly/templates/clientlib.html"
     data-sly-call="${clientlib.css @ categories='plp-ssr'}" />
<sly data-sly-use.productList="com.aem.ie.core.models.PLPSSRList" />
<section class="compare-sec">
  <div class="fm-container">
    <div class="aem-Grid aem-Grid--12">
      <div
              class="aem-GridColumn aem-GridColumn--default--3 aem-GridColumn--tablet--12 aem-GridColumn--phone--12"
      >
        <div class="compare-title analyticcompare">
          <h3>Compare</h3>
          <p class="compare-text"></p>
          <a
                  href="/content/fm/en/compare.html"
                  title="Compare"
                  class="compare-btn"
          >Compare</a
          >
        </div>
      </div>
      <div
              class="aem-GridColumn aem-GridColumn--default--9 aem-GridColumn--tablet--12 aem-GridColumn--phone--12"
      >
        <div class="compare-image">
          <ul id="compare-products"></ul>
          <ul class="compare-dummy">
            <li>&nbsp;</li>
            <li>&nbsp;</li>
            <li>&nbsp;</li>
            <li>&nbsp;</li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</section>
<section class="breadcrumb-container pb-0">
  <div class="aem-Grid aem-Grid--12">
    <div class="fm-container">
      <div
              class="aem-GridColumn aem-GridColumn--default--12 aem-GridColumn--tablet--12 aem-GridColumn--phone--12"
      >
		<!--PLP SSR breadcrumb Logic-->
		<div class="plp-breadcrumbs">
          <ul>
            <li class="home">
              <a href="/content/fm/en/homepage.html" title="Go to Home Page">Home</a>
              <span><i class="fa fa-angle-right" aria-hidden="true"></i></span>
            </li>
            <li>
              <sly data-sly-test="${(properties.newsreleasetitle || properties.bestsellertitle)}">
              <ul class="ssr-breadcrumbs">
                <sly data-sly-test="${properties.bestsellertitle}">
                  <li>${properties.bestSellarBreadcrumbText}</li>
                  <li><span><i class="fa fa-angle-right" aria-hidden="true"></i></span></li>
                </sly>
                <sly data-sly-test="${properties.newsreleasetitle}">
                  <li>${properties.newReleasesBreadcrumbText}</li>
                  <li><span><i class="fa fa-angle-right" aria-hidden="true"></i></span></li>
                </sly>
              </ul>
              </sly>
              <sly data-sly-test="${(!properties.newsreleasetitle && !properties.bestsellertitle)}">
              <ul class="ssr-breadcrumbs" data-sly-list.keybread=${productList.getBreadcrumbValues}>
                <li><a x-cq-linkchecker="skip" href="${productList.getBreadcrumbValues[keybread]}">${keybread}</a></li>
				<li><span><i class="fa fa-angle-right" aria-hidden="true"></i></span></li>
             </ul>
              </sly>
          </li>      
		</ul>
		</div>
      </div>
    </div>
  </div>
</section>

<section class="bs-title-container pb-0">
  <div class="fm-container">
    <div class="aem-Grid aem-Grid--12">
      <div
              class="aem-GridColumn aem-GridColumn--default--3 aem-GridColumn--tablet--12 aem-GridColumn--phone--12 blank-none-mob"
      >
        &nbsp;
      </div>
      <div
              class="aem-GridColumn aem-GridColumn--default--9 aem-GridColumn--tablet--12 aem-GridColumn--phone--12"
      >
        <sly data-sly-test="${(!properties.newsreleasetitle) && (!properties.bestsellertitle)}">
          <div data-sly-use.hashmap="com.aem.ie.core.models.PLPModel">
            <div class="plp-head-content productListpage show-less" data-sly-list.key="${hashmap.myHashMap}">
              <h1>${key @ context='html'}</h1>
              <div class="plp-category-description more ">
                ${hashmap.myHashMap[key] @ context='html'}
              </div>
            </div>
          </div>
        </sly>

        <sly data-sly-test="${(properties.newsreleasetitle || properties.bestsellertitle)}">
          <div data-sly-use.hashmap="com.aem.ie.core.models.NewsReleasesModel">
            <div class="plp-head-content productListpage show-less" data-sly-list.key="${hashmap.myHashMap}">
              <h1>${key @ context='html'}</h1>
              <div class="plp-category-description more ">
                ${hashmap.myHashMap[key] @ context='html'}
              </div>
            </div>
          </div>
        </sly>

      </div>
    </div>
  </div>
</section>
<section class="fm-container">
  <div id="algolia-data-ssr" class="category-products aem-Grid aem-Grid--12 ${productList.bestSellerClass} ${productList.newReleasesClass} ${productList.allPageClass}">
    <div class="aem-GridColumn aem-GridColumn--default--3 aem-GridColumn--tablet--12 aem-GridColumn--phone--12"
    >
      <div class="plp-filter">
        <div class="plp-filter-title">
          Filters<button class="filter-close" onclick="$algolia.filterClose()">
          <i class="fa-regular fa-xmark font-22"></i>
        </button>
        </div>
        <div id="current-refinements-ssr" class="analyticsclearfilter"></div>
        <!-- This is for category section -->
        <div class="for-all">
		<sly data-sly-test=${productList.getCategoryFilterValueNames} !=null>
		<div id="current-refinements-ssr" class="analyticsclearfilter">
            <div class="ais-CurrentRefinements">
          <ul class="ais-CurrentRefinements-list" data-sly-list=${productList.getCategoryFilterValueNames}>
    <li class="ais-CurrentRefinements-item">
      <span class="ais-CurrentRefinements-category">
        <span class="ais-CurrentRefinements-categoryLabel">${item}</span>
        <a x-cq-linkchecker="skip" class="ais-CurrentRefinements-delete" href="${productList.getCategoryFilterValueNames[item]}">âœ•</a>
      </span>
    </li>
    </ul>
    </div>
    </div>
	</sly>
	    <div id="clear-refinements-ssr">
		<div class="ais-ClearRefinements"><button class="ais-ClearRefinements-button ${productList.clearAllClass}"><span>Clear All</span></button></div>
		</div>
        <div class="accordion-list">
            <!--Facetvalues FOR ALL from PLP SSR  -->
              <sly data-sly-test=${productList.getAllFacetListValueMap} !=null>
              <div class="accordion-item accord-static cat-filter plp-filter-cty analyticsplpfilter">
                <div class="accordion-head">
                  Category
                </div>
                <div class="accordion-content lvl-cat-cls" id="brand-list-all-ssr">
                  <div class="ais-RefinementList">
                    <ul class="ais-RefinementList-list" data-sly-list.listAllCategory=${productList.getAllFacetListValueMap}>
                      <li class="ais-RefinementList-item">
                        <div>
                          <label class="ais-RefinementList-label">
                            <input type="checkbox" class="ais-RefinementList-checkbox" data-url="${listAllCategory.categoryUrlValue}" value="${listAllCategory.facetAllKeyValue}">
                            <span class="ais-RefinementList-labelText">${listAllCategory.facetAllKeyValue}</span>
                            <span class="ais-RefinementList-count">${listAllCategory.facetAllCountValue}</span>
                          </label>
                        </div>
                      </li>
                    </ul>
                  </div>
                </div>
              </div>
            </sly>

            <!--Facetvalues FOR ALL from PLP SSR ends heres -->

            <!--PAGE LEVEL-->
            <sly data-sly-test=${productList.getFacetListMap} !=null>
			    <div id="catfilter-head-ssr">
                <div data-sly-list=${productList.getFacetListMap}>
                  <div class="accordion-item accordion-filter plp-filter-cty analyticsplpfilter">
                   <div class="accordion-head">${item}</div>
                    <div class="accordion-content refinementList" id="facetVal-cat">
				<div class="ais-RefinementList">
                        <ul class="ais-RefinementList-list" data-sly-list.keyvalues=${productList.getFacetListMap[item]}>
                          <li class="ais-RefinementList-item">
                            <div><label class="ais-RefinementList-label">
                              <input type="checkbox" class="ais-RefinementList-checkbox" value="${keyvalues}">
                              <span class="ais-RefinementList-labelText">${keyvalues}</span>
                              <span class="ais-RefinementList-count" data-sly-list.values=${productList.getFacetListValueMap[keyvalues]}>${values}</span></label>
                            </div>
                          </li>
                        </ul>
                      </div>
					</div>
                  </div>
              	</div>
			  </div>
			</sly>
			<sly data-sly-test=${productList.getwaveguideCategoryValues} !=null>
              <div class="accordion-item accord-static cat-filter plp-filter-cty analyticsplpfilter ">
                <div class="accordion-head open">
                  Sub categories
                </div>
                <div class="accordion-content" id="lvl1-cat-ssr" style="display: block;">
                  <div class="ais-RefinementList">
                    <ul class="ais-RefinementList-list" data-sly-list.subCategoryValues=${productList.getwaveguideCategoryValues}>
                      <sly data-sly-test=${subCategoryValues.facetAllKeyValue} != ' '>
					  <li class="ais-RefinementList-item">
                        <div>
                          <label class="ais-RefinementList-label">
                            <input type="checkbox" class="ais-RefinementList-checkbox" data-url="${subCategoryValues.categoryUrlValue}" value="${subCategoryValues.facetAllKeyValue}">
                            <span class="ais-RefinementList-labelText">${subCategoryValues.facetAllKeyValue}</span>
                            <span class="ais-RefinementList-count">${subCategoryValues.facetAllCountValue}</span>
                          </label>
                        </div>
                      </li>
					  </sly>
                    </ul>
                  </div>
                </div>
              </div>
            </sly>
			<!-- News Release Facet Filter Values -->
      <div class="accordion-list">
		<sly data-sly-test="${(properties.newsreleasetitle || properties.bestsellertitle)}">      
			<sly data-sly-test=${productList.getnewsReleaseFacetFilterValues} !=null>
              <div class="accordion-item accord-static cat-filter plp-filter-cty analyticsplpfilter">
                <div class="accordion-head">
                  Category
                </div>
                <div class="accordion-content" id="brand-list-new-ssr">
                  <div class="ais-RefinementList">
                    <ul class="ais-RefinementList-list" data-sly-list=${productList.getnewsReleaseFacetFilterValues}>
                      <li class="ais-RefinementList-item">
                        <div>
                          <label class="ais-RefinementList-label">
                            <input type="checkbox" class="ais-RefinementList-checkbox" value="${item}">
                            <span class="ais-RefinementList-labelText">${item}</span>
                            <span class="ais-RefinementList-count">${productList.getnewsReleaseFacetFilterValues[item]}</span>
                          </label>
                        </div>
                      </li>
                    </ul>
                  </div>
                </div>
              </div>
            </sly>
        </sly>
      </div>
        <!--price range-->
        <sly data-sly-test=${productList.getPriceRangeValues} !=null>
          <div class="accordion-item accord-static plp-filter-cty analyticsplpfilter price-range-ssr-wrap" data-sly-list.pricekey=${productList.getPriceRangeValues}>
            <div class="accordion-head">Price Range</div>
            <div class="accordion-content priceSlider price-range-item" id="price-range-ssr" style="display: none;">
              <div id="slider-range" class="slider-range"></div>            
            <div class="customised-range">
              <div id="range-input-ssr">
                <div  class="ais-RangeInput ais-RangeInput--noRefinement" >
                  <form class="ais-RangeInput-form-ssr" cr-attached="true">
                    <label class="ais-RangeInput-label">
                      <input class="ais-RangeInput-input ais-RangeInput-input--min" type="number" min="${pricekey}" value="${pricekey}" max="${productList.getPriceRangeValues[pricekey]}" step="0.000001" placeholder="${pricekey}"></label>
                      <span class="ais-RangeInput-separator">to</span><label class="ais-RangeInput-label">
                        <input class="ais-RangeInput-input ais-RangeInput-input--max" type="number" min="${pricekey}" value="${productList.getPriceRangeValues[pricekey]}" max="${productList.getPriceRangeValues[pricekey]}" step="0.000001" placeholder="${productList.getPriceRangeValues[pricekey]}"></label>
                        <button type="submit" class="ais-RangeInput-submit">Go</button>
                      </form>
                      </div>
                    </div>
            </div>
          </div>
          </div>
        </sly>
         <!--price range ends here-->
          </div>
	    </div>
          <!--PAGE LEVEL ENDS HERE-->

        <div class="fixed-pop-button">
          <div id="clear-refinements-mob"></div>
          <button class="apply_btn_fix" onclick="$algolia.filterClose()">
            Apply
          </button>
        </div>

        <div style="display: none" class="best-products"></div>
        <div style="display: none" id="shipmentDate"></div>
      </div>
    </div>

    <div class="aem-GridColumn aem-GridColumn--default--9 aem-GridColumn--tablet--12 aem-GridColumn--phone--12"
    >
      <div class="plp-product-list">
        <div class="plp-toolbar">
          <div class="plp-title plp-title-mob">Products</div>
          <div class="toolbar-first-row">
            <div class="plp-title plp-title-desk">Products</div>
            <div class="plp-view-mode analyticplpview">
              <div class="tile-view-button active">
                <i class="fa-regular fa-rectangle-vertical-history font-14"></i>
                Tile
              </div>
              <div class="card-view-button">
                <i class="fa-regular fa-list-radio font-14"></i>
                Card
              </div>
              <div class="table-view-button">
                <i class="fa-regular fa-table-list font-14"></i>
                Table
              </div>
            </div>
            <div class="filter-by-wrapper">
              <div class="filter-by-label">
                <button onclick="$algolia.filterPopup()">
                  <i class="fa-sharp fa-regular fa-filter-list"></i> Filter
                </button>
              </div>
            </div>
            <div class="sort-by-wrapper analyticplpsort">
              <div class="sort-by-label">Sort By:</div>
              <div class="sort-by-ssr">
                <div class="ais-SortBy plpSortBy plp-ssr-SortBy" data-sly-use.algoliaConfig="com.aem.ie.core.models.AlgoliaConfigModel">
                  <select class="ais-SortBy-select plpSortBySelect">
                    <sly data-sly-test="${productList.bestSellarClass == 'fm-bs-data'}">
                      <option class="ais-SortBy-option" value="${algoliaConfig.indexBs @context='attribute'}">${properties.defaultText}</option>
                    </sly>
                    <sly data-sly-test="${productList.bestSellarClass != 'fm-bs-data'}">
                      <option class="ais-SortBy-option" value="${algoliaConfig.indexInuse @context='attribute'}">${properties.defaultText}</option>
                    </sly>
                    <option class="ais-SortBy-option" value="${algoliaConfig.indexNmAsc @context='attribute'}">${properties.nameAscText}</option>
                    <option class="ais-SortBy-option" value="${algoliaConfig.indexNmDsc @context='attribute'}">${properties.nameDescText}</option>
                    <option class="ais-SortBy-option" value="${algoliaConfig.indexPrAsc @context='attribute'}">${properties.priceAscText}</option>
                    <option class="ais-SortBy-option" value="${algoliaConfig.indexPrDsc @context='attribute'}">${properties.priceDescText}</option>
                  </select>
                </div>
              </div>
            </div>
            <div class="hits-per-page-mob-ssr"></div>
          </div>

          <div class="toolbar-second-row showing-bar-desk-none">
            <div class="limiter analyticplplimiter">
              <div class="show_text">Show</div>
              <div class="hits-per-page-ssr">
                <div class="ais-HitsPerPage">
                  <select class="ais-HitsPerPage-select">
                    <option class="ais-HitsPerPage-option" value="12">12</option>
                    <option class="ais-HitsPerPage-option" value="24">24</option>
                    <option class="ais-HitsPerPage-option" value="48">48</option>
                    <option class="ais-HitsPerPage-option" value="100">100</option>
                  </select>
                </div>
              </div>
              <div class="of_text">of</div>
              <div class="stats2-ssr">

                <span class="ais-Stats-text">${productList.showResults} results<a title="Edit Parameters" class="edit-param" onclick="$algolia.enlarge();">Edit Parameters</a></span>
              </div>
            </div>
            <!-- place dynamic values here -->
            <div id="pagination-top-ssr" class="pagination">
              <ul class="ais-Pagination-list">Page
                <li class="active-page desktop-pagination-top" data-value="${productList.activePageDataValue}">
                  <input class="page-number-ssr" type="number" min="1" max="${productList.nbPages}" value="${productList.page}">
                </li>
                <li class="pagination_gap"> of ${productList.nbPages} </li>
                <li class="ais-Pagination-item ais-Pagination-item--previousPage ssr-prevPage">
                  <a title="Pagination Link" href="#" data-value="${productList.page}">
                  <span class="ais-Pagination-link"><i class="fa fa-angle-left analytictracktop" aria-hidden="true"></i></span>
                  </a>
                </li>
                <li class="ais-Pagination-item ais-Pagination-item--nextPage ssr-nextPage">
                <a class="ais-Pagination-link" title="Pagination Link" href="#" data-value="${productList.page}">
                <i class="fa fa-angle-right analytictracktop" aria-hidden="true"></i>
                </a>
                </li>
              </ul>
            </div>
          </div>
          <div class="showing-bar-mob">
            <strong>Showing</strong> 1 to <span id="page-length-end-ssr">${productList.hitsPerPage}</span> of
            <span class="mstats-ssr">
              <div class="ais-Stats">
                <span class="ais-Stats-text">${productList.showResults}</span>
              </div>
            </span>
          </div>
        </div>
        <div class="search-panel tile-view">
          <div class="search-panel__results">
            <div class="table-scroll-dv-nw">
              <div class="pr-table-dv-nw">
                <div class="pr-tr-dv" id="plptable-head-ssr">
                  <div class="pr-th-dv"><span>Compare</span></div>
                  <div class="pr-th-dv"><span>Product name</span></div>
                  <div class="pr-th-dv sticky-action"><span>Actions</span></div>
                  <div class="pr-th-dv"><span>Quantity</span></div>
                  <div class="pr-th-dv"><span>SKU</span></div>
                  <div class="pr-th-dv"><span>Price per unit</span></div>
                  <div class="pr-th-dv">
                    <span
                    ><i class="fa-regular fa-circle-info"></i> Ship date</span
                    >
                  </div>
                </div>
                <div id="hits-ssr">
                  <div>
                    <ol class="ais-Hits-list" data-sly-list.key="${productList.productListMap}">
                      <li class="ais-Hits-item">
                        <div class="product-grid ${key.SKUSlashCheck}-filt">
                          <div class="plp-viewcol-1">
                            <div class="product-image-wrapper analyticplptrack">
                              <input type="hidden" id="analyticproddetail" value="${key.brandSKU}@@${key.name}">
                              <div class="product-image">
                                <div class="tile-prod-labels">
                          <span class="algolia-rohs">
                        </span>
                                  <span class="label-new freight-label ${(key.isOversized == 'true') ? '':'d-none'}"><span class="fr-tool-tip">${properties.freightdescription}<i class="fa-solid fa-caret-down"></i></span>${properties.freighttitle}</span>
                                  <span class="algolia-new"><span class="label-new ${(key.isNew == 'true') ? '':'d-none'}">${properties.new}</span>
                        </span>
                                </div>

                                <a title="${key.name}" data-object="${key.brandSKU}" class="store-obj url-class" href="${key.seoUrl}" x-cq-linkchecker="skip">
                                  <img id="plp-img" class="plp-img-src" src="${key.LargeImage @ context='uri'}" alt="${seoName} ${key.brandSKU}">
                                </a></div>
                              <div class="label-title-wrapper">
                                <div class="algolia-product-labels">
                                <span data-qty="${key.inventory @ context='html'}" class="algolia-qty ct__qty data-loader">

                      ${key.inventory @ context='html'}
                      </span>
                                  <span class="algolia-rohs">
                      </span>

                                  <span class="label-new freight-label ${(key.isOversized == 'true') ? '':'d-none'}"><span class="fr-tool-tip">${properties.freightdescription}<i class="fa-solid fa-caret-down"></i></span>${properties.freighttitle}</span>
                                  <span class="algolia-new">

                                    <span class="label-new ${(key.isNew == 'true') ? '':'d-none'}">${properties.new}</span>
                      </span>
                                </div>
                                <h2 class="algolia-product-name">
                                  <a title="${key.name}" class="store-obj url-class" data-object="${key.brandSKU}" href="${key.seoUrl}" x-cq-linkchecker="skip">${key.name}</a>
                                </h2>
                              </div>
                            </div>
                            <div class="algolia-datasheet analyticdatasheet ${key.dataSheetItemHidden}">
                              <input type="hidden" id="analyticplpdatasheet" value="${key.analyticPLPDatasheetName}">
                              <a title="Datasheet" target="_blank" href="${key.DataSheet @context='uri'}" x-cq-linkchecker="skip"><i class="fa fa-file-text-o" aria-hidden="true" ></i> Datasheet</a></div>

                            <div class="pr-td-dv-nw tab-compare analyticplpcompareproduct">
                              <div class="compare-box-new ${key.isMasterCA}"><input id="ID${key.SKUSlashCheck}" class="js-refinement-link input-checkbox" data-id="ID${key.SKUSlashCheck}" aria-label="ID${key.SKUSlashCheck}" data-sku="${key.brandSKU}" data-title="${key.name}" data-alt="${key.seoName} ${key.brandName} ${key.brandSKU}" data-compare="${key.LargeImage @ context='uri'}" type="checkbox" value="${key.name}@@${key.category}@@${key.brandSKU}"><label for="ID${key.SKUSlashCheck}">Compare</label></div>
                            </div>
                            <!-- PDP URL need in href  -->
                            <div class="pr-td-dv tab-title"><a title="${key.name}" class="store-obj ellipsis-90" data-object="${key.brandSKU}" href="${key.seoUrl}" x-cq-linkchecker="skip">${key.name}</a></div>
                            <div class="pr-td-dv sticky-action">

                              <a title="Add to Cart" class="add-cart-btn ccounter" href="Javascript:void(0)" onclick="addtocartSpecific(this);" data-cartqty="" data-sku="${key.brandSKU}" data-currency="USD" data-analyticcartprod="${key.brandSKU}
                              @@
                              ${key.name}
                              @@
                              ${key.brandSKU}
                              @@
                              ${key.unitPrice}
                              @@
                              ${key.startingPrice}
                              @@
                              ${key.length}
                              @@
                              ${key.color}
                              @@
                              ${key.bestSellerRank}
                              @@
                              ${key.inventory}
                              @@
                              ${key.category}">Add to Cart</a>

                            </div>
                            <div class="pr-td-dv tab-quant ct__qty">                              
                              ${key.tableInventoryValue @ context='html'}
                            </div>
                            <div class="pr-td-dv tab-sku">${key.brandSKU}</div>
                            <div class="pr-td-dv tab-price"><span class="label-value ct__price data-loader">${key.startingPrice}</span></div>
                            <div class="pr-td-dv shipment-date">${key.estimatedShipmentDate}</div>

                          </div>
                          <div class="plp-viewcol-2 plp-actions">
                            <div class="sku-label"><span class="label-txt">SKU</span><span class="label-value orignal-sku">${key.brandSKU}</span> <span class="label-value newSelected-sku">${key.brandSKU}/<span class="colorsku"></span>-<span class="lengthsku">0</span></span></div>
                            <div class="price-label">
                              <span class="label-txt">Starting price</span>
                              <span class="label-value ct__price data-loader">${key.startingPrice}</span>
                            </div>
                            <div class="delivery-label"><span class="label-txt">Estimated shipment</span> <span class="label-value shipment-date">${key.estimatedShipmentDate}</span></div>
                            
                            <sly data-sly-test = "${key.viewProductStatusFlag == 'true'}">
                            <div class="view-product-div">
                              <a title="${properties.viewproduct}" data-object="${key.brandSKU}" class="view-products cart-button store-obj" href="${key.seoUrl}" x-cq-linkchecker="skip">${properties.viewproduct}</a>
                            </div>
                            </sly>
                            <sly data-sly-test = "${key.viewProductStatusFlag == 'false'}">
                            <div class="add-to-cart">
                              <div class="qty">
                                <button class="cart-qty-minus" onclick="addminus(this);" type="button"><span class="dec-val"> - </span></button>
                                <input type="text" class="qty_num" name="qty_num" aria-label="inp-${key.SKUSlashCheck}" value="1" oninput="changeQuantityAttribute(this)" onblur="checkValidationQuantity(this)">
                                <button class="cart-qty-plus" onclick="addplus(this);" type="button"><span class="inc-val"> + </span></button>
                              </div>
                              <button  type="button" title="Add to Cart" class="cart-button add_to_cart" onclick="addtocartSpecific(this);" data-cartqty="" data-analyticcartprod="${key.brandSKU}@@${key.name}@@${key.productId}@@${key.unitPrice}@@${key.startingPrice}@@${key.length}@@${key.color}@@${key.bestSellerRank}@@${key.inventoryActualCount}@@${key.category}" data-sku="${key.brandSKU}" data-currency="${key.currencyCode}">Add to Cart</button>
                            </div>
                            </sly>
                          </div>
                        </div>
                      </li>
                    </ol></div>
                </div>
              </div>
            </div>
          </div>

          <div class="hitsTable-wrapper">
            <div class="modal custom-column myModal1">
              <div class="custom-column-inner analyticplpcustomcolumndisplay">
                <i class="fa fa-times pdpclose" aria-hidden="true" id="closeId1-ssr"></i>
                <div class="custom-column-header">
                  <h3>Custom Column Display</h3>
                </div>
                <div class="custom-column-content checkbox-flex">
                  <div class="custom-column-checkbox mt-0">
                    <div class="compare-box pos-relat">
                      <input
                              id="selectAllcheckbox"
                              onclick="$algolia.selectAllCheck(this);"
                              class="compare-checkbox"
                              type="checkbox"
                      /><label for="selectAllcheckbox"
                    ><span>Select All</span></label
                    >
                    </div>
                  </div>
                  <div class="pop-filter-flex" id="catfilter-popup-ssr"></div>
                </div>
                <div class="custom-column-footer">
                  <button class="custom-column-button" id="custom-column-btn">
                    APPLY CHANGES
                  </button>
                </div>
              </div>
            </div>
          </div>

          <div class="pagination"></div>
        </div>
      

      <div class="toolbar-second-row mob-bot-pagination">
        <div class="limiter mt-0 analyticplplimiter">
          <div class="show_text">Show</div>
          <div class="hits-per-page-bottom-ssr">
            <div class="ais-HitsPerPage">
              <select class="ais-HitsPerPage-select">
                <option class="ais-HitsPerPage-option" value="12">12</option>
                <option class="ais-HitsPerPage-option" value="24">24</option>
                <option class="ais-HitsPerPage-option" value="48">48</option>
                <option class="ais-HitsPerPage-option" value="100">100</option>
              </select>
            </div>
          </div>
          <div class="of_text">of</div>
          <div class="stats2-bottom-ssr">
            <span class="ais-Stats-text">${productList.showResults} results</span>
          </div>
        </div>

        <div id="pagination-bottom-ssr" class="pagination pagination-bottom mt-0">
          <!-- place the dynamic code for pagination -->
          <ul class="ais-Pagination-list">	
            <li class="desktop-pagination desktop-pagination-bottom ml-pl-0">
              <ul class=" ml-pl-0">Page <li style="display:inline-block" class="active-page">                
                <input class="page-number-ssr" type="number" min="1" max="${productList.nbPages}" value="${productList.page}">
              </li>                                                        
            <li style="display:inline-block"> of ${productList.nbPages}</li>
            </ul>
            </li>
            <li class="double-angle-ar-lf"> <a class="mob-first-page" title="Pagination Link" href="#" data-value="0"><i class="fa fa-angle-double-left" aria-hidden="true"></i></a>
            </li>
            <li class="ais-Pagination-item ais-Pagination-item--prevPage ssr-prevPage">
              <a title="Pagination Link" href="#" data-value="${productList.previousPage}"><span class="ais-Pagination-link"><i class="fa fa-angle-left analytictrackbottom" aria-hidden="true"></i></span></a>
            </li>
                    
              <li class="mobile-pagination ml-pl-0">
                <ul class=" ml-pl-0">
              Page          
                    <li class="active-page" style="display: none">
                      <a title="Pagination Link" href="" data-value="${productList.previousPage}">
                        ${productList.activePageDataValue}
                      </a>
                    </li>                  
                    <li class="active-page">
                      <input class="page-number-ssr" type="number" min="1" max="${productList.nbPages}" value="${productList.page}">
                    </li>                                                        
            <li> of ${productList.nbPages} </li>
              </ul></li>
            
                      <li class="ais-Pagination-item ais-Pagination-item--nextPage ssr-nextPage">
                        <a title="Pagination Link" class="ais-Pagination-link" href="" data-value="${productList.page}">
                          <i class="fa fa-angle-right analytictrackbottom" aria-hidden="true"></i>
                        </a>
                      </li>
                      <li class="double-angle-ar-rt"><a class="mob-last-page" title="Pagination Link" href="#" data-value="${productList.doubleArrowLastPageValue}"> <i class="fa fa-angle-double-right" aria-hidden="true"></i></a> </li>
            </ul>
        </div>
      </div>
    </div> <!-- end of plp-product-list -->
    </div>
  </div>

   <div id="algolia-data" class="category-products aem-Grid aem-Grid--12 d-none">
    <div
      class="aem-GridColumn aem-GridColumn--default--3 aem-GridColumn--tablet--12 aem-GridColumn--phone--12"
    >
      <div class="plp-filter">
        <div class="plp-filter-title">
          Filters<button class="filter-close" onclick="$algolia.filterClose()">
            <i class="fa-regular fa-xmark font-22"></i>
          </button>
        </div>
        <div id="current-refinements" class="analyticsclearfilter"></div>
        <div id="clear-refinements"></div>
        <div class="accordion-list">
          <div
            class="accordion-item accord-static cat-filter plp-filter-cty analyticsplpfilter"
          >
            <div class="accordion-head">Category</div>
            <div class="accordion-content" id="brand-list"></div>
          </div>
          <div class="accordion-item lvl1-filter plp-filter-cty d-none">
            <div class="accordion-head open">Sub categories</div>
            <div class="accordion-content" id="lvl1-cat"></div>
          </div>
          <div id="catfilter-head"></div>
          <div
            class="accordion-item accord-static plp-filter-cty analyticsplpfilter"
          >
            <div class="accordion-head">Price Range</div>
            <div
              class="accordion-content priceSlider price-range-item"
              id="price-range"
            >
            <div class="customised-range-remove"></div>
            <div class="customised-range">
              <div id="range-input"></div>
            </div></div>
          </div>
        </div>
        <div class="fixed-pop-button">
          <div id="clear-refinements-mob"></div>
          <button class="apply_btn_fix" onclick="$algolia.filterClose()">
            Apply
          </button>
        </div>

        <div style="display: none" class="best-products"></div>
        <div style="display: none" id="shipmentDate"></div>
      </div>
    </div>

    <div
      class="aem-GridColumn aem-GridColumn--default--9 aem-GridColumn--tablet--12 aem-GridColumn--phone--12"
    >
      <div class="plp-product-list">
        <div class="plp-toolbar">
          <div class="plp-title plp-title-mob">Products</div>
          <div class="toolbar-first-row">
            <div class="plp-title plp-title-desk">Products</div>
            <div class="plp-view-mode analyticplpview">
              <div class="tile-view-button active">
                <i class="fa-regular fa-rectangle-vertical-history font-14"></i>
                Tile
              </div>
              <div class="card-view-button">
                <i class="fa-regular fa-list-radio font-14"></i>
                Card
              </div>
              <div class="table-view-button">
                <i class="fa-regular fa-table-list font-14"></i>
                Table
              </div>
            </div>
            <div class="filter-by-wrapper">
              <div class="filter-by-label">
                <button onclick="$algolia.filterPopup()">
                  <i class="fa-sharp fa-regular fa-filter-list"></i> Filter
                </button>
              </div>
            </div>
            <div class="sort-by-wrapper analyticplpsort">
              <div class="sort-by-label">Sort By:</div>
              <div class="sort-by"></div>
            </div>
            <div class="hits-per-page-mob"></div>
          </div>

          <div class="toolbar-second-row showing-bar-desk-none">
            <div class="limiter analyticplplimiter">
              <div class="show_text">Show</div>
              <div class="hits-per-page"></div>
              <div class="of_text">of</div>
              <div class="stats2"></div>
            </div>

            <div id="pagination-top" class="pagination"></div>
          </div>
          <div class="showing-bar-mob">
            <strong>Showing</strong> 1 to <span id="page-length-end"></span> of
            <span class="mstats"></span>
          </div>
        </div>
        <div class="search-panel tile-view">
          <div class="search-panel__results">
            <div class="table-scroll-dv-nw">
              <div class="pr-table-dv-nw">
                <div class="pr-tr-dv" id="plptable-head">
                  <div class="pr-th-dv"><span>Compare</span></div>
                  <div class="pr-th-dv"><span>Product name</span></div>
                  <div class="pr-th-dv sticky-action"><span>Actions</span></div>
                  <div class="pr-th-dv"><span>Quantity</span></div>
                  <div class="pr-th-dv"><span>SKU</span></div>
                  <div class="pr-th-dv"><span>Price per unit</span></div>
                  <div class="pr-th-dv">
                    <span
                      ><i class="fa-regular fa-circle-info"></i> Ship date</span
                    >
                  </div>
                </div>
                <div id="hits"></div>
              </div>
            </div>

            <div class="hitsTable-wrapper">
              <div class="modal custom-column myModal1">
                <div class="custom-column-inner analyticplpcustomcolumndisplay">
                  <i class="fa fa-times pdpclose" aria-hidden="true" id="closeId1"></i>
                  <div class="custom-column-header">
                    <h3>Custom Column Display</h3>
                  </div>
                  <div class="custom-column-content checkbox-flex">
                    <div class="custom-column-checkbox mt-0">
                      <div class="compare-box pos-relat">
                        <input
                          id="selectAllcheckbox"
                          onclick="$algolia.selectAllCheck(this);"
                          class="compare-checkbox"
                          type="checkbox"
                        /><label for="selectAllcheckbox"
                          ><span>Select All</span></label
                        >
                      </div>
                    </div>
                    <div class="pop-filter-flex" id="catfilter-popup"></div>
                  </div>
                  <div class="custom-column-footer">
                    <button class="custom-column-button" id="custom-column-btn-ssr">
                      APPLY CHANGES
                    </button>
                  </div>
                </div>
              </div>
            </div>

            <div class="pagination"></div>
          </div>
        </div>

        <div class="toolbar-second-row mob-bot-pagination">
          <div class="limiter mt-0 analyticplplimiter">
            <div class="show_text">Show</div>
            <div class="hits-per-page-bottom"></div>
            <div class="of_text">of</div>
            <div class="stats2-bottom"></div>
          </div>

          <div id="pagination-bottom" class="pagination mt-0"></div>
        </div>
      </div>
    </div>
  </div> 
  </div>
</section>

<div class="d-none" id="isnew-list"></div>
<div class="sort-bestsellers d-none"></div>
<div class="d-none" id="lvl1-cat"></div>
<div class="d-none" id="lvl2-cat"></div>
<script>
  //code to track CTA link for view  by tile, card & table.
  document.querySelector("body").addEventListener(
    "click",
    function (e) {
      var divElement = e.target.closest("div");
      var label = "";
      var category = "";
      if (divElement !== null && divElement.textContent !== null) {
        label = divElement.textContent.trim();
        var urlString = window.location.href;
        var url = new URL(urlString);
        var pageNo = url.searchParams.get(algoliaIndexPageNo);
        if (pageNo == null) {
          pageNo = 1;
        }
        specificCategory = url.searchParams.get(algoliaIndex);
        if (specificCategory == null) {
          specificCategory = "";
        }
        if (divElement.closest(".analyticplpview") != null) {
          category = "Product List";
        }
        ctalinkDataLayerCall(label, category, specificCategory);
        return false;
      } else {
        return true;
      }
    },
    false
  );

  //code to track CTA link on sort/no of pagees option click
  document.querySelector("body").addEventListener(
    "change",
    function (e) {
      var selectElement = e.target.closest("select");
      var label = "";
      var category = "";
      if (selectElement !== null && selectElement.value !== null) {
        label = selectElement.value.trim();
        var urlString = window.location.href;
        var url = new URL(urlString);
        var pageNo = url.searchParams.get(algoliaIndexPageNo);
        if (pageNo == null) {
          pageNo = 1;
        }
        specificCategory = url.searchParams.get(algoliaIndex);
        if (specificCategory == null) {
          specificCategory = "";
        }
        if (selectElement.closest(".analyticplplimiter") != null) {
          if (
            selectElement.parentNode.parentNode.className ==
            "hits-per-page-bottom"
          ) {
            label = "Product Select Filter-down-" + label;
          } else {
            label = "Product Select Filter-up-" + label;
          }
          category = "Product List";
        }
        ctalinkDataLayerCall(label, category, specificCategory);
        return false;
      } else {
        return true;
      }
    },
    false
  );

  //code to track CTA link on sort functionality
  document.querySelector("body").addEventListener(
    "change",
    function (e) {
      var selectElement = e.target.closest("select");
      var label = "";
      var category = "";
      if (
        selectElement !== null &&
        selectElement.value !== null &&
        selectElement.closest(".plpSortBySelect") != null
      ) {
        var selectedText =
          selectElement.options[selectElement.selectedIndex].text;
        if (selectElement.closest(".analyticplpsort") != null) {
          label = selectedText.trim();
        }
        var urlString = window.location.href;
        var url = new URL(urlString);
        specificCategory = url.searchParams.get(algoliaIndex);
        if (specificCategory == null) {
          specificCategory = "";
        }
        plpsortDataLayerCall(label, specificCategory);
        return false;
      } else {
        return true;
      }
    },
    false
  );

  //code to track analytic data for pagination
  document.querySelector("body").addEventListener(
    "click",
    function (e) {
      var anchor = e.target.closest("a");
      var flag = "true";
      if (anchor !== null && anchor.hasChildNodes()) {
        flag = "true";
      } else {
        flag = "false";
      }
      if (flag === "true") {
        var anchorchild = anchor.childNodes;
        var iElement = "";
        for (var i = 0; i < anchorchild.length; i++) {
          if (
            anchorchild[i].className != "undefined" &&
            anchorchild[i].className != null
          ) {
            if (
              anchorchild[i].className.search("analytictracktop") != "-1" ||
              anchorchild[i].className.search("analytictrackbottom") != "-1"
            ) {
              iElement = anchorchild[i];
            }
            if (
              anchorchild[i].className.search("ais-Pagination-link") != "-1"
            ) {
              iElement = anchorchild[i].childNodes[0];
            }
          }
        }
        //var iElement = e.target.closest('i');
        var label = "";
        var category = "";
        var currentPage = "";
        var specificCategory = "";

        if (
          iElement !== null &&
          iElement.className !== null &&
          iElement !== "undefined"
        ) {
          //four scenairo up-next, up-back, down-next, down-back to capture
          iClassName = iElement.className;

          var urlString = window.location.href;
          var url = new URL(urlString);
          var pageNo = url.searchParams.get(algoliaIndexPageNo);
          if (pageNo == null) {
            pageNo = 1;
          }
          specificCategory = url.searchParams.get(algoliaIndex);
          if (specificCategory == null) {
            specificCategory = "";
          }

          if (
            iClassName !== null &&
            iClassName !== undefined &&
            iClassName.search("analytictracktop") != "-1"
          ) {
            //top
            if (iClassName.search("angle-left") != "-1") {
              //left arrow
              label = "Pagination Link-top-Previous";
              currentPage = --pageNo;
            } else {
              //right arrorw
              label = "Pagination Link-top-Next";
              currentPage = ++pageNo;
            }
          } else if (iClassName !== null && iClassName !== undefined) {
            //bottom
            if (iClassName.search("angle-left") != "-1") {
              //lef arrow
              label = "Pagination Link-bottom-Previous";
              currentPage = --pageNo;
            } else {
              //right arrorw
              label = "Pagination Link-bottom-Next";
              currentPage = ++pageNo;
            }
          }
          category = "PLP";
          //alert("label="+label+" currentPage="+currentPage+" category="+category+" specificCategory="+specificCategory);
          paginationdataLayerCall(
            label,
            category,
            currentPage,
            specificCategory
          );
          return false;
        } else {
          return true;
        }
      }
    },
    false
  );
</script>
<sly
        data-sly-use.clientlib="/libs/granite/sightly/templates/clientlib.html"
        data-sly-call="${clientlib.js @ categories='plp-ssr'}"
/>